<div ng-if="!milestone._view">
	<div class="row">
		<div class="col-md-10">
			<p>
				<strong>{{ milestone.name }}</strong>
				<span label="label" ng-repeat="label in milestoneLabels | filterDisplayObjects"></span>
			</p>
		</div>
		<div class="col-md-2" ng-pluralize count="(comments | filterDisplayObjects).length" when="commentsPluralizeWhen"></div>
	</div>

	<hr ng-show="milestone._view">

	<p class="text-muted" style="margin-bottom:0px;">
		#{{ milestone.number }} created on {{ milestone._created | date:'mediumDate' }} by {{ milestone.user }}
	</p>
</div>

<div ng-if="milestone._view">

	<div class="row">
		<div class="col-sm-10">
			<h1>{{ milestone.name }} <span class="text-muted">#{{ milestone.number }}</span></h1>
		</div>
		<div class="col-sm-2 text-right">
			<button type="button" class="btn btn-default" ng-click="toggleOpen();" style="margin-top:10px;">{{ milestone.open ? 'Close' : 'Reopen' }}</button>
		</div>
	</div>

	<p>
		<span class="tj-label" style="margin-left:0px;" ng-style="{ 'background-color': (milestone.open ? '#5cb85c' : '#c9302c') }">{{ milestone.open? 'Open!' : 'Closed' }}</span> <strong>{{ milestone.user }}</strong> created this milestone on <span ng-attr-title="{{ milestone._created | date:'medium' }}">{{ milestone._created | date:'mediumDate' }}</span>. <span ng-pluralize count="displayComments.length" when="commentsPluralizeWhen"></span>
	</p>

	<div class="comment" style="margin-left:-15px; margin-right:-15px; padding:10px 15px 10px 15px; border-top:1px solid #ddd;">
		<md ng-model="milestone.description"></md>
		<p class="text-muted" ng-show="!milestone.description" style="margin-top:10px;"><em>No description given.</em></p>

		<div>
			<ul class="list-inline" style="margin-bottom:0px;">
				<li add-labels-popover milestone="milestone"></li>
				<li ng-repeat="label in milestoneLabels | filterDisplayObjects" style="padding:0px;"><a href="#" label="label"></a></li>
			</ul>
		</div>
	</div>

	<div class="comment" ng-repeat="comment in comments | filterDisplayObjects | orderBy:'created' as displayComments" style="margin-left:-15px; margin-right:-15px; padding:10px 15px 10px 15px; border-top:1px solid #ddd;">
		<p>
			<strong>{{ comment.user }}</strong>
			<span class="text-muted">{{ comment.created | date:'medium' }}</span>
		</p>
		<md ng-model="comment.comment"></md>
	</div>

	<form name="newCommentForm">
		<div class="row" style="margin-bottom:-15px; padding-top:15px; border-top:1px solid #dddddd; background-color:#ececec;" ng-show="milestone._view">
			
			<div class="col-md-10">

				<div class="form-group">
					<textarea class="form-control" name="" id="" ng-model="milestone._new_comment" placeholder="Comment..."></textarea>
				</div>

			</div>
			<div class="col-md-2">
				<div class="form-group">
					<button class="btn btn-block btn-primary" ng-click="addComment(milestone);">Add Comment</button>
				</div>
			</div>
		</div>
	</form>
</div>